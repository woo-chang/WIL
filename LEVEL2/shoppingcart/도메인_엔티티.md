## 도메인, 엔티티 분리

`Entity` 하나가 `Domain`을 대체하게 되면 객체와 테이블 간 패러다임 불일치로 인하여 객체가 다른 객체를 참조할 수 없고 필드로 ID와 같은 객체의 식별자만 가져야
한다. 코드에서 Cart는 분명 Member와 Product 객체를 참조할 수 있어야 하는데(이를 객체 그래프라 한다.) 항상 DB를 거쳐서 Member나 Product를
조회해야 한다. Cart 내부에서 Product나 Member에게 메시지를 던질 수 없으니, 객체 지향 프로그래밍이 아닌 SQL 지향 프로그래밍처럼 개발하게 된다.

그뿐만 아니라 복잡한 요구사항을 처리하다 보니 DB를 위한 코드가 하나둘씩 Entity에 침투하게 되는데, 이렇게 되면 Domain 로직과 DB 로직이 한 객체에 혼재되어 있어서
유지보수하기 어렵게 만든다. 이러한 두 가지 문제점 중 전자는 JPA를 사용해 해결할 수 있으나, 후자는 JPA로도 해결이 되지 않는 문제라 Domain과 Entity를 엄격히
분리하여 개발하는 편이다.

사실 복잡한 요구사항이 아니더라도 DB에 접근하기 위한 라이브러리인 JdbcTemplate, JPA, R2dbc 등 다양한 라이브러리를 사용하다 보면 라이브러리 고유 문법이
Entity에 침투하게 된다. JPA는 대표적으로 @OneToMany, @Table 등 어노테이션 기반 코드가 많이 들어온다. 또한, 상황에 따라서는 DB의 인덱스, 특이한 컬럼
타입 등의 이유로도 라이브러리만의 고유 코드를 사용해야 한다. 그런 코드들이 적다면 괜찮은데, 요구사항이 복잡해질수록 정도가 심해지다 보니 이럴 때는 Domain과 Entity를
구분하는 것이 오히려 유지보수하기 좋아진다.
